* Collision macros:

* initialize collision for an object type
MAKECOL	MACRO	N1
	BLIST
LN1	EQU	CLCOUNT
MN1	SET	0
CLCOUNT	SET	CLCOUNT+1
	IFGT	CLCOUNT-NCOLLIS
	MESSG	"CLCOUNT OVFL"
	ENDIF
	MLIST
	ENDM

* handle a collision
COLLIDE	MACRO	N1,N2
	BLIST
	IFN	4000!>LN2!.MN1
	MESSG	"DUP COL N1,N2"
	ENDIF
MN1	SET	4000!>LN2!+MN1
MN2	SET	4000!>LN1!+MN2
.$$	SET	*
	IFLE	LN1-LN2
	ORG	CLTABLE+LN2*(LN2+1)+2*LN1
	FDB	.$$
	ORG	.$$
	ELSE
	ERR	SWAP N1,N2
	ENDIF
	MLIST
	ENDM
